package work;

import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowEvent;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

import javax.swing.JLabel;
import javax.swing.JPanel;

public class TimePass extends JPanel implements WorkbookListener,
		ActionListener {

	private static final long serialVersionUID = 3992217048186698165L;
	private JLabel label;

	public TimePass() {
		super();
		setLayout(new FlowLayout());
		setSize(300, 300);
		setLayout(null);
		label = new JLabel("blblblal");
		label.setLocation(20, 20);
		label.setSize(500, 20);
		this.add(label);
		refresh();
	}

	public String getDiff(long diff) {
		long diffSeconds = diff / 1000 % 60;
		long diffMinutes = diff / (60 * 1000) % 60;
		long l = diff / (60 * 60 * 1000);
		long diffHours = l % 24;
		long diffDays = diff / (24 * 60 * 60 * 1000);
		String ret = "";
		ret += diffDays > 0 ? diffDays + " days, " : "";
		ret += diffHours > 0 ? diffHours + " hours, " : "";
		ret += diffMinutes > 0 ? diffMinutes + " minutes, " : "";

		ret += diffSeconds > 0 ? diffSeconds + " seconds. " : "";

	
		ret += l > 0 ? l + " hours in total" : "";
		return ret;
	}

	public String getText() {
		return label.getText();
	}

	@Override
	public void actionPerformed(ActionEvent e) {

	}

	@Override
	public boolean exiting(WindowEvent e) {

		return false;
	}

	public void refresh() {
		Calendar calendar = new GregorianCalendar(2014, 2, 25, 12, 0, 0);

		long diff = Calendar.getInstance().getTimeInMillis()
				- calendar.getTimeInMillis();

		label.setText(getDiff(diff));

	}

}
